SET SERVEROUTPUT ON;

DROP TABLE JEGY;
DROP TABLE BIZTOSITAS_KATEGORIAK;
DROP TABLE ERTEKEL;
DROP TABLE UTAS;
DROP TABLE JARAT;
DROP TABLE LEGITARSASAG;
DROP TABLE BIZTOSITAS;
DROP TABLE BIZTOSITO;


CREATE TABLE BIZTOSITO(
    ID NUMBER(4) PRIMARY KEY NOT NULL,
    LEIRAS VARCHAR(200)
);
    
CREATE TABLE BIZTOSITAS(
    ID NUMBER(4) PRIMARY KEY NOT NULL,
    AR NUMBER(8),
    DATUM DATE NOT NULL,
    BIZTOSITOID NUMBER(4) NOT NULL,
    FOREIGN KEY (BIZTOSITOID) REFERENCES BIZTOSITO(ID) ON DELETE CASCADE);
    
CREATE TABLE UTAS(
    FELHASZNALONEV VARCHAR(20) PRIMARY KEY NOT NULL,
    EMAIL VARCHAR(20) NOT NULL, 
    JELSZO VARCHAR(200) NOT NULL,
    BIZTOSITASID NUMBER(4) GENERATED BY DEFAULT AS IDENTITY(START with 2010 INCREMENT by 1) UNIQUE NOT NULL,
    FOREIGN KEY (BIZTOSITASID) REFERENCES BIZTOSITAS(ID) ON DELETE SET NULL);
    
CREATE TABLE LEGITARSASAG(
    NEVE VARCHAR2(30) PRIMARY KEY NOT NULL,
    TULAJDONOS VARCHAR(20) NOT NULL,
    TELEPHELY VARCHAR(20) NOT NULL);    
    
CREATE TABLE JARAT (
    JARATSZAM NUMBER(4) PRIMARY KEY NOT NULL,
    ETKEZES NUMBER(1) NOT NULL,
    SZABAD_HELY NUMBER(4),
	TOBBMEGALLOS NUMBER(2) NOT NULL,
    INDULAS TIMESTAMP NOT NULL,
    ERKEZES TIMESTAMP NOT NULL,  
    HONNAN VARCHAR(20) NOT NULL,
    HOVA VARCHAR(20) NOT NULL,
    LEGITARSASAG VARCHAR(20),
    FOREIGN KEY (LEGITARSASAG) REFERENCES LEGITARSASAG(NEVE) ON DELETE CASCADE);
    
CREATE TABLE JEGY(
    ID NUMBER(4) GENERATED BY DEFAULT AS IDENTITY(START with 6 INCREMENT by 1) PRIMARY KEY NOT NULL, 
    AR NUMBER(8) NOT NULL,
	--ATSZALLASOS NUMBER(1) NOT NULL,
    --TIPUS NUMBER(1) NOT NULL,                --0: GYEREK, 1: FELNOTT
    FELHASZNALONEV VARCHAR(20), 
    JARATSZAM NUMBER(4) NOT NULL,
    FOREIGN KEY (FELHASZNALONEV) REFERENCES UTAS(FELHASZNALONEV) ON DELETE CASCADE,
    FOREIGN KEY (JARATSZAM) REFERENCES JARAT(JARATSZAM) ON DELETE CASCADE);
    
CREATE TABLE BIZTOSITAS_KATEGORIAK(
    ID NUMBER(4) NOT NULL,
    KATEGORIA VARCHAR2(30) NOT NULL,
    FOREIGN KEY (ID) REFERENCES BIZTOSITAS(ID) ON DELETE CASCADE,
    PRIMARY KEY (ID, KATEGORIA));
    
CREATE TABLE ERTEKEL(    
    FELHASZNALONEV VARCHAR(20),
    LEGITARSASAG VARCHAR2(30) NOT NULL,
    ERTEKELES NUMBER(1) NOT NULL,
    FOREIGN KEY (FELHASZNALONEV) REFERENCES UTAS(FELHASZNALONEV) ON DELETE SET NULL,
    FOREIGN KEY (LEGITARSASAG) REFERENCES LEGITARSASAG(NEVE) ON DELETE CASCADE,
    PRIMARY KEY(FELHASZNALONEV, LEGITARSASAG));

--BIZTOSITOK
INSERT INTO BIZTOSITO VALUES(1001, 'Hello, én a Biztonságos Biztosító vagyok, és nagyon biztonságos vagyok');
INSERT INTO BIZTOSITO VALUES(1002, 'Üdv, én a Megbízható Biztosító vagyok, és nagyon megbízható vagyok');
INSERT INTO BIZTOSITO VALUES(1003, 'Hello, én az Olcsó Biztosító vagyok, és nagyon olcsó vagyok');
INSERT INTO BIZTOSITO VALUES(1004, 'Üdv, én a Legjobb Biztosító vagyok, és én vagyok a legjobb');
INSERT INTO BIZTOSITO VALUES(1005, 'Hello, én a Jó Biztosító vagyok, és nagyon jó vagyok');
--5

--BIZTOSITASOK
INSERT INTO BIZTOSITAS VALUES(2001, 20000, TO_DATE('2022 03 20', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2002, 25000, TO_DATE('2022 03 21', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2003, 30000, TO_DATE('2022 03 22', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2004, 35000, TO_DATE('2022 03 23', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2005, 40000, TO_DATE('2022 03 24', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2006, 45000, TO_DATE('2022 03 25', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2007, 50000, TO_DATE('2022 03 26', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2008, 55000, TO_DATE('2022 03 27', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2009, 60000, TO_DATE('2022 03 28', 'yyyy mm dd'), 1001);

INSERT INTO BIZTOSITAS VALUES(2010, 20000, TO_DATE('2022 03 20', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2011, 25000, TO_DATE('2022 03 21', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2012, 30000, TO_DATE('2022 03 22', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2013, 35000, TO_DATE('2022 03 23', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2014, 40000, TO_DATE('2022 03 24', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2015, 45000, TO_DATE('2022 03 25', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2016, 50000, TO_DATE('2022 03 26', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2017, 55000, TO_DATE('2022 03 27', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2018, 60000, TO_DATE('2022 03 28', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2019, 65000, TO_DATE('2022 03 29', 'yyyy mm dd'), 1002);

INSERT INTO BIZTOSITAS VALUES(2020, 10000, TO_DATE('2022 01 01', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2021, 15000, TO_DATE('2022 01 02', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2022, 20000, TO_DATE('2022 01 03', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2023, 25000, TO_DATE('2022 01 04', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2024, 30000, TO_DATE('2022 01 05', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2025, 35000, TO_DATE('2022 01 06', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2026, 40000, TO_DATE('2022 01 07', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2027, 45000, TO_DATE('2022 01 08', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2028, 50000, TO_DATE('2022 01 09', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2029, 55000, TO_DATE('2022 01 10', 'yyyy mm dd'), 1003);

INSERT INTO BIZTOSITAS VALUES(2030, 30000, TO_DATE('2022 01 11', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2031, 35000, TO_DATE('2022 01 12', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2032, 40000, TO_DATE('2022 01 13', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2033, 45000, TO_DATE('2022 01 14', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2034, 50000, TO_DATE('2022 01 15', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2035, 55000, TO_DATE('2022 01 16', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2036, 60000, TO_DATE('2022 01 17', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2037, 65000, TO_DATE('2022 01 18', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2038, 70000, TO_DATE('2022 01 19', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2039, 75000, TO_DATE('2022 01 20', 'yyyy mm dd'), 1004);

INSERT INTO BIZTOSITAS VALUES(2040, 10000, TO_DATE('2022 01 21', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2041, 20000, TO_DATE('2022 01 22', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2042, 30000, TO_DATE('2022 01 23', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2043, 40000, TO_DATE('2022 01 24', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2044, 50000, TO_DATE('2022 01 25', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2045, 60000, TO_DATE('2022 01 26', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2046, 70000, TO_DATE('2022 01 27', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2047, 80000, TO_DATE('2022 01 28', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2048, 90000, TO_DATE('2022 01 29', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2049, 100000, TO_DATE('2022 01 30', 'yyyy mm dd'), 1005);

INSERT INTO BIZTOSITAS VALUES(2050, 10000, TO_DATE('2022 02 01', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2051, 10000, TO_DATE('2022 02 02', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2052, 10000, TO_DATE('2022 02 03', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2053, 10000, TO_DATE('2022 02 04', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2054, 10000, TO_DATE('2022 02 05', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2055, 10000, TO_DATE('2022 02 06', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2056, 10000, TO_DATE('2022 02 07', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2057, 10000, TO_DATE('2022 02 08', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2058, 10000, TO_DATE('2022 02 09', 'yyyy mm dd'), 1001);
INSERT INTO BIZTOSITAS VALUES(2059, 10000, TO_DATE('2022 02 10', 'yyyy mm dd'), 1001);

INSERT INTO BIZTOSITAS VALUES(2060, 20000, TO_DATE('2022 02 11', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2061, 25000, TO_DATE('2022 02 12', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2062, 30000, TO_DATE('2022 02 13', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2063, 35000, TO_DATE('2022 02 14', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2064, 40000, TO_DATE('2022 02 15', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2065, 45000, TO_DATE('2022 02 16', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2066, 50000, TO_DATE('2022 02 17', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2067, 55000, TO_DATE('2022 02 18', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2068, 60000, TO_DATE('2022 02 19', 'yyyy mm dd'), 1002);
INSERT INTO BIZTOSITAS VALUES(2069, 65000, TO_DATE('2022 02 20', 'yyyy mm dd'), 1002);

INSERT INTO BIZTOSITAS VALUES(2070, 10000, TO_DATE('2022 03 01', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2071, 15000, TO_DATE('2022 03 02', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2072, 20000, TO_DATE('2022 03 03', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2073, 25000, TO_DATE('2022 03 04', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2074, 30000, TO_DATE('2022 03 05', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2075, 35000, TO_DATE('2022 03 06', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2076, 40000, TO_DATE('2022 03 07', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2077, 45000, TO_DATE('2022 03 08', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2078, 50000, TO_DATE('2022 03 09', 'yyyy mm dd'), 1003);
INSERT INTO BIZTOSITAS VALUES(2079, 55000, TO_DATE('2022 03 10', 'yyyy mm dd'), 1003);

INSERT INTO BIZTOSITAS VALUES(2080, 30000, TO_DATE('2022 03 11', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2081, 35000, TO_DATE('2022 03 12', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2082, 40000, TO_DATE('2022 03 13', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2083, 45000, TO_DATE('2022 03 14', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2084, 50000, TO_DATE('2022 03 15', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2085, 55000, TO_DATE('2022 03 16', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2086, 60000, TO_DATE('2022 03 17', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2087, 65000, TO_DATE('2022 03 18', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2088, 70000, TO_DATE('2022 03 19', 'yyyy mm dd'), 1004);
INSERT INTO BIZTOSITAS VALUES(2089, 75000, TO_DATE('2022 03 20', 'yyyy mm dd'), 1004);

INSERT INTO BIZTOSITAS VALUES(2090, 10000, TO_DATE('2022 03 21', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2091, 20000, TO_DATE('2022 03 22', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2092, 30000, TO_DATE('2022 03 23', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2093, 40000, TO_DATE('2022 03 24', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2094, 50000, TO_DATE('2022 03 25', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2095, 60000, TO_DATE('2022 03 26', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2096, 70000, TO_DATE('2022 03 27', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2097, 80000, TO_DATE('2022 03 28', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2098, 90000, TO_DATE('2022 03 29', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2099, 100000, TO_DATE('2022 03 30', 'yyyy mm dd'), 1005);
INSERT INTO BIZTOSITAS VALUES(2100, 105000, TO_DATE('2022 04 01', 'yyyy mm dd'), 1005);

--UTASOK
INSERT INTO UTAS VALUES('Admin01', 'admin01@gmail.com', 'admin', 2001);
INSERT INTO UTAS VALUES('Admin02', 'admin02@gmail.com', 'admin', 2002);
INSERT INTO UTAS VALUES('Admin03', 'admin03@freemail.hu', 'admin', 2003);
INSERT INTO UTAS VALUES('Admin04', 'admin04@freemail.hu', 'admin', 2004);
INSERT INTO UTAS VALUES('Admin05', 'admin05@freemail.hu', 'admin', 2005);

--LEGITARSASAGOK
INSERT INTO LEGITARSASAG VALUES('Léggitársaság Zrt.', 'Repülő Róbert', 'Pápa');
INSERT INTO LEGITARSASAG VALUES('Csak felfelé Rt.', 'Szálló Szilárd', 'Boba');
INSERT INTO LEGITARSASAG VALUES('Turbina Rt.', 'Amelia Earhart', 'Szeged');
INSERT INTO LEGITARSASAG VALUES('Lufthansa', 'Grippen Gergő', 'Székesfehérvár');
INSERT INTO LEGITARSASAG VALUES('Boeing és társa', 'Boeing Bálint', 'Budapest');


--JARATOK
INSERT INTO JARAT VALUES(1001, 0, 10, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY-MM-DD hh:mm:ss.'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'London', 'Budapest', 'Turbina Rt.');
INSERT INTO JARAT VALUES(1002, 0, 20, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Budapest', 'London', 'Turbina Rt.');
INSERT INTO JARAT VALUES(1003, 0, 14, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Szeged', 'New York', 'Turbina Rt.');
INSERT INTO JARAT VALUES(1004, 0, 45, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'New York', 'Szeged', 'Turbina Rt.');
INSERT INTO JARAT VALUES(1005, 0,  8, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Párizs', 'Szeged', 'Turbina Rt.');
INSERT INTO JARAT VALUES(1006, 0,  9, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Róma', 'Budapest', 'Lufthansa');
INSERT INTO JARAT VALUES(1007, 0, 31, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Berlin', 'Budapest', 'Lufthansa');
INSERT INTO JARAT VALUES(1008, 0, 45, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Budapest', 'Róma', 'Lufthansa');
INSERT INTO JARAT VALUES(1009, 0,  9, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Szeged', 'Párizs', 'Lufthansa');
INSERT INTO JARAT VALUES(1010, 0, 78, 0, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Budapest', 'Párizs', 'Lufthansa');
INSERT INTO JARAT VALUES(1011, 0, 78, 1, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Budapest', 'Párizs', 'Lufthansa');
INSERT INTO JARAT VALUES(1012, 0, 78, 1, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Budapest', 'Párizs', 'Lufthansa');
INSERT INTO JARAT VALUES(1013, 0, 78, 2, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Budapest', 'Párizs', 'Lufthansa');
INSERT INTO JARAT VALUES(1014, 0, 78, 2, TO_TIMESTAMP('2022 01 01 12:30:00','YYYY MM DD HH24:MI:SS'), TO_TIMESTAMP('2022 01 01 17:30:00','YYYY MM DD HH24:MI:SS'), 'Párizs', 'Barcelona', 'Lufthansa');


--JEGYEK
INSERT INTO JEGY VALUES(1, 50000, 'Admin01', 1001);
INSERT INTO JEGY VALUES(2, 60000, 'Admin02', 1002);
INSERT INTO JEGY VALUES(3, 20000, 'Admin03', 1003);
INSERT INTO JEGY VALUES(4, 40000, 'Admin04', 1004);
INSERT INTO JEGY VALUES(5, 30000, 'Admin05', 1005);


--BIZTOSITAS_KATEGORIAK
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2001, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2002, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2003, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2004, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2005, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2006, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2007, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2008, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2009, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2010, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2011, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2012, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2013, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2014, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2015, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2016, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2017, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2018, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2019, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2020, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2021, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2022, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2023, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2024, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2025, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2026, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2027, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2028, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2029, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2030, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2031, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2032, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2033, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2034, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2035, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2036, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2037, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2038, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2039, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2040, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2041, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2042, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2043, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2044, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2045, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2046, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2047, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2048, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2049, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2050, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2051, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2052, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2053, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2054, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2055, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2056, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2057, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2058, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2059, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2060, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2061, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2062, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2063, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2064, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2065, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2066, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2067, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2068, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2069, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2070, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2071, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2072, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2073, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2074, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2075, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2076, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2077, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2078, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2079, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2080, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2081, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2082, 'balesetbiztosítás lvl2');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2083, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2084, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2085, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2086, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2087, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2088, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2089, 'poggyászbiztosítás');

INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2090, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2091, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2092, 'balesetbiztosítás lvl5');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2093, 'balesetbiztosítás lv13');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2094, 'balesetbiztosítás lvl4');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2095, 'balesetbiztosítás lvl1');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2096, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2097, 'jogvédelem');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2098, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2099, 'poggyászbiztosítás');
INSERT INTO BIZTOSITAS_KATEGORIAK VALUES(2100, 'poggyászbiztosítás');

--ERTEKELESEK
INSERT INTO ERTEKEL VALUES('Admin01', 'Csak felfelé Rt.', 5);
INSERT INTO ERTEKEL VALUES('Admin02', 'Léggitársaság Zrt.', 5);
INSERT INTO ERTEKEL VALUES('Admin03', 'Turbina Rt.', 3);
INSERT INTO ERTEKEL VALUES('Admin04', 'Lufthansa', 4);
INSERT INTO ERTEKEL VALUES('Admin05', 'Boeing és társa', 2);
INSERT INTO ERTEKEL VALUES('Admin01', 'Léggitársaság Zrt.', 5);
INSERT INTO ERTEKEL VALUES('Admin02', 'Boeing és társa', 1);
INSERT INTO ERTEKEL VALUES('Admin03', 'Turbina Rt.', 3);
INSERT INTO ERTEKEL VALUES('Admin04', 'Lufthansa', 4);
INSERT INTO ERTEKEL VALUES('Admin05', 'Boeing és társa', 2);

--integritást ellenőrző UPDATE triggerek
CREATE OR REPLACE TRIGGER i_biztosito
BEFORE UPDATE OF ID ON BIZTOSITO
FOR EACH ROW
BEGIN
    UPDATE BIZTOSITAS SET BIZTOSITOID = :NEW.ID
    WHERE BIZTOSITOID = :OLD.ID;
END;
/

CREATE OR REPLACE TRIGGER i_biztositas
BEFORE UPDATE OF ID ON BIZTOSITAS
FOR EACH ROW
BEGIN
    UPDATE UTAS SET BIZTOSITASID = :NEW.ID
    WHERE BIZTOSITASID = :OLD.ID;
    
    UPDATE BIZTOSITAS_KATEGORIAK SET ID = :NEW.ID
    WHERE ID = :OLD.ID;
END;
/


CREATE OR REPLACE TRIGGER i_legitarsasag
BEFORE UPDATE OF NEVE ON LEGITARSASAG
FOR EACH ROW
BEGIN
    UPDATE JARAT SET LEGITARSASAG = :NEW.NEVE
    WHERE LEGITARSASAG = :OLD.NEVE;
END;
/


CREATE OR REPLACE TRIGGER i_utas
BEFORE UPDATE OF FELHASZNALONEV ON UTAS
FOR EACH ROW
BEGIN
    UPDATE JEGY SET FELHASZNALONEV = :NEW.FELHASZNALONEV
    WHERE FELHASZNALONEV = :OLD.FELHASZNALONEV;
    
    UPDATE ERTEKEL SET FELHASZNALONEV = :NEW.FELHASZNALONEV
    WHERE FELHASZNALONEV = :OLD.FELHASZNALONEV;
END;
/


CREATE OR REPLACE TRIGGER i_jarat
BEFORE UPDATE OF JARATSZAM ON JARAT
FOR EACH ROW
BEGIN
    UPDATE JEGY SET JARATSZAM = :NEW.JARATSZAM
    WHERE JARATSZAM = :OLD.JARATSZAM;
    
    UPDATE ERTEKEL SET JARATSZAM = :NEW.JARATSZAM
    WHERE JARATSZAM = :OLD.JARATSZAM;
END;
/


--módosításra figyelmeztető triggerek
CREATE OR REPLACE TRIGGER BIZTOSITAS_ACTION
AFTER INSERT OR UPDATE OR DELETE ON BIZTOSITAS
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosítás(ok)hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosítás(ok)frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosítás(ok) törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER BIZTOSITAS_KATEGORIAK_ACTION
AFTER INSERT OR UPDATE OR DELETE ON BIZTOSITAS_KATEGORIAK
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosítás kategória hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosítás kategória frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosítás kategória törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER BIZTOSITO_ACTION
AFTER INSERT OR UPDATE OR DELETE ON BIZTOSITO
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosító(k) hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosító(k) frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Biztosító(k) törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER ERTEKEL_ACTION
AFTER INSERT OR UPDATE OR DELETE ON ERTEKEL
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Értékelés(ek) hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Értékelés(ek) frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Értékelés(ek) törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER JARAT_ACTION
AFTER INSERT OR UPDATE OR DELETE ON JARAT
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Járat(ok) hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Járat(ok) frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Járat(ok) törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER JEGY_ACTION
AFTER INSERT OR UPDATE OR DELETE ON JEGY
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Jegy(ek) hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Jegy(ek) frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Jegy(ek) törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER LEGITARSASAG_ACTION
AFTER INSERT OR UPDATE OR DELETE ON LEGITARSASAG
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Légitársaság(ok) hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Légitársaság(ok) frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Légitársaság(ok) törölve.');
     END IF;
END;
/


CREATE OR REPLACE TRIGGER UTAS_ACTION
AFTER INSERT OR UPDATE OR DELETE ON UTAS
DECLARE
BEGIN
     IF INSERTING THEN
          DBMS_OUTPUT.PUT_LINE('Utas(ok)hozzáadva.');
     ELSIF UPDATING THEN
          DBMS_OUTPUT.PUT_LINE('Utas(ok)frissítve.');
     ELSIF DELETING THEN
          DBMS_OUTPUT.PUT_LINE('Utas(ok) törölve.');
     END IF;
END;
/